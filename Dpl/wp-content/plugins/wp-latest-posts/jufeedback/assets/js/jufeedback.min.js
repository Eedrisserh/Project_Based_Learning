!function(e){"undefined"==typeof ajaxurl&&(ajaxurl=ju_feedback.ajaxurl);var t={listFreePlugins:function(){return["wp-speed-of-light","wp-meta-seo","wp-latest-posts","advanced-gutenberg","imagerecycle-pdf-image-compression"]},getElements:function(t){var n=[];return e(".ju-feedback-dialog."+t).find("input.reason-deactive:checked").each(function(e,t){n.push(this.name)}),{deactiveElement:e("#the-list").find('[data-slug="'+t+'"] span.deactivate a'),modalElement:e(".ju-feedback-dialog."+t),disableButton:e(".ju-feedback-dialog."+t).find(".feedback-button a.disable-only"),sendFeedbackButton:e(".ju-feedback-dialog."+t).find(".feedback-button a.send-message"),reasonKey:n,technicalElement:e(".ju-feedback-dialog."+t).find(".technical-information")}},deactivateAction:function(e){location.href=this.getElements(e).deactiveElement.attr("href")},modal:function(){var t=this;t.initModal=function(a){var i;return i||(i=t.getElements(a).modalElement.dialog({width:500,maxHeight:400,autoOpen:!1,closeOnEscape:!0,draggable:!1,resizable:!1,position:{my:"center",at:"center",of:window},modal:!0,dialogClass:"noTitle juDialogFeedback",show:{effect:"fade",duration:500},hide:{effect:"fade",duration:300},open:function(n,i){e(".ui-widget-overlay").bind("click",function(){t.getElements(a).modalElement.dialog("close")})},create:function(i,o){e(".choose-reason").click(function(){if(t.getElements(a).reasonKey.length>0){var i=e(this).attr("id");e("input#"+i+":checked").length>0?e("textarea#comment-"+i).show().focus():e("textarea#comment-"+i).hide(),n(t.getElements(a).modalElement)}else e("textarea.feedback-text").hide()}),e(".technical-information .more").toggle(function(){e(this).html("arrow_drop_up"),e(".technical-information textarea[name='technical']").show(),n(t.getElements(a).modalElement)},function(){e(this).html("arrow_drop_down"),e(".technical-information textarea[name='technical']").hide(),n(t.getElements(a).modalElement)}),t.getElements(a).disableButton.click(function(n){n.preventDefault(),e.ajax({url:ajaxurl,dataType:"json",method:"POST",data:{action:"ju_disable_feedback_"+a,ajax_nonce:ju_feedback.token},success:function(){t.deactivateAction(a)}})}),t.getElements(a).sendFeedbackButton.click(function(n){var i="";e('input[name="allow_send_technical"]:checked').length>0&&(i=t.getElements(a).technicalElement.find('textarea[name="technical"]').attr("data-info"));var o=[];t.getElements(a).reasonKey.length>0&&t.getElements(a).reasonKey.forEach(function(t){o.push({reason:t,comment:e("textarea#comment-"+t).val()})}),n.preventDefault(),t.getElements(a).modalElement.find(".ju-loading").show(),e.ajax({url:ajaxurl,dataType:"json",method:"POST",data:{action:"ju_send_feedback_deactive_"+a,reasons:JSON.stringify(o),feedbackTechnical:i,ajax_nonce:ju_feedback.token},success:function(e){setTimeout(function(){t.getElements(a).modalElement.find(".feedback-button").hide(),t.getElements(a).modalElement.find(".content").hide(),t.getElements(a).modalElement.find(".feedback-result-notice").html(e.message).show(),e.send_status?t.getElements(a).modalElement.find(".feedback-result-notice").addClass("send-success"):t.getElements(a).modalElement.find(".feedback-result-notice").addClass("send-error"),setTimeout(function(){t.deactivateAction(a)},1e3)},1e3)}})})}})),i},t.showModal=function(e){t.initModal(e).dialog("open"),t.renderTechnicalData(e)}},blindEvents:function(){var t=this;e("#the-list").find("tr.active span.deactivate").on("click","a",function(n){var a=e(n.target).parents("tr.active").attr("data-slug");-1!==e.inArray(a,t.listFreePlugins())&&t.getElements(a).modalElement.length>0&&(n.preventDefault(),t.showModal(a))})},renderTechnicalData:function(t){var n=this;n.getElements(t).technicalElement.find('textarea[name="technical"]').val("Loading..."),e.ajax({url:ajaxurl,dataType:"json",method:"POST",data:{action:"ju_feedback_get_technical_data_"+t,ajax_nonce:ju_feedback.token},success:function(e){e.get_status?(pretty_str=JSON.stringify(e.data,void 0,4),n.getElements(t).technicalElement.find('textarea[name="technical"]').attr("data-info",JSON.stringify(e.data))):pretty_str="We could not find technical information !",n.getElements(t).technicalElement.find('textarea[name="technical"]').val(pretty_str)}})},init:function(){this.modal(),this.blindEvents()}};function n(t){var n=e(window).height();t.outerHeight()+70>=n?t.dialog("option","maxHeight",n):t.dialog("option","maxHeight",n-70)}e(function(){t.init()})}(jQuery);